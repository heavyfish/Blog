<!DOCTYPE html>
<html lang="zh-Hans">
    <head>
    <meta charset="utf-8">

    

    <!-- 渲染优化 -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="HandheldFriendly" content="True" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!--icon-->

    
    
    
    
    


    <!-- meta -->


<title>no title | 速查笔记</title>





    <!-- OpenGraph -->
 
    <meta name="description" content="8、从应用访问pod元数据以及其他资源8.1、通过Downward API传递元数据  8.1.1、了解可用的元数据      8.1.2、通过环境变量暴露元数据      8.1.3、通过downwardAPI卷来传递元数据              8.2、与Kubernetes API服务器交互    8.2.1、探究Kubernetes REST API12# 得到服务器的URLkubec">
<meta property="og:type" content="article">
<meta property="og:title" content="速查笔记">
<meta property="og:url" content="https://heavyfish.github.io/2020/11/02/k8s/Kubernetes%20in%20Action%20%E7%AC%94%E8%AE%B08%EF%BD%9E9/index.html">
<meta property="og:site_name" content="速查笔记">
<meta property="og:description" content="8、从应用访问pod元数据以及其他资源8.1、通过Downward API传递元数据  8.1.1、了解可用的元数据      8.1.2、通过环境变量暴露元数据      8.1.3、通过downwardAPI卷来传递元数据              8.2、与Kubernetes API服务器交互    8.2.1、探究Kubernetes REST API12# 得到服务器的URLkubec">
<meta property="og:locale">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102094945657.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095020431.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095046923.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095114420.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095213342.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095234670.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095308602.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095430715.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095502746.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095529755.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095641916.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095836306.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095857600.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102095938694.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102100117040.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102100136191.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102100401365.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102100504403.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102100637036.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102100743235.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102100803852.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102100822026.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101121323.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101158492.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101259904.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101347850.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101435083.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101500333.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101558270.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101704754.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101826003.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101918819.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102101939730.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102035568.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102147660.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102207254.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102352872.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102412533.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102442249.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102647838.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102725127.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102810272.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102834119.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102102900493.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102114848983.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102114957590.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102115310955.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102115151713.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102115449358.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102115554146.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102115746599.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102115809983.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102115909828.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102120036320.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102120141706.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102120322937.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102120443249.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102120756595.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102120916202.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121059977.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121138457.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121339077.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121438449.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121554411.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121610669.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121649738.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121707945.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102121952728.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102122106601.png">
<meta property="og:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102122256270.png">
<meta property="article:published_time" content="2020-11-01T17:11:13.323Z">
<meta property="article:modified_time" content="2020-11-02T04:27:35.275Z">
<meta property="article:author" content="Shenxr">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://heavyfish.github.io/Users/shenshawn/Library/Application%20Support/typora-user-images/image-20201102094945657.png">


    
<link rel="stylesheet" href="/heavyfish.github.io/css/style/main.css">
 



    
    
        <link rel="stylesheet" id="hl-default-theme" href="/heavyfish.github.io/css/highlight/default.css" media="none" onload="if(getComputedStyle(document.documentElement).getPropertyValue('--color-mode').indexOf('dark')===-1)this.media='all'">
        
    

    
    

     

    <!-- custom head -->

<meta name="generator" content="Hexo 5.3.0"></head>

    <body>
        <div id="app">
            <header class="header">
    <div class="header__left">
        <a href="/heavyfish.github.io/" class="button">
            <span class="logo__text">Demo</span>
        </a>
    </div>
    <div class="header__right">
        
            <div class="navbar__menus">
                
                    <a href="/heavyfish.github.io/" class="navbar-menu button">首页</a>
                
                    <a href="/heavyfish.github.io/tags/" class="navbar-menu button">标签</a>
                
                    <a href="/heavyfish.github.io/categories/" class="navbar-menu button">分类</a>
                
                    <a href="/heavyfish.github.io/archives/" class="navbar-menu button">归档</a>
                
                    <a href="/heavyfish.github.io/friends/" class="navbar-menu button">友链</a>
                
                    <a href="/heavyfish.github.io/page/" class="navbar-menu button">Page</a>
                
            </div>
        
        
        

        
        

        

        
            <a class="dropdown-icon button" id="btn-dropdown" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width='24' height='24' fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round"><path fill="currentColor" d="M3.314,4.8h13.372c0.41,0,0.743-0.333,0.743-0.743c0-0.41-0.333-0.743-0.743-0.743H3.314c-0.41,0-0.743,0.333-0.743,0.743C2.571,4.467,2.904,4.8,3.314,4.8z M16.686,15.2H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,15.2,16.686,15.2z M16.686,9.257H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,9.257,16.686,9.257z"></path></svg></a>
            <div class="dropdown-menus" id="dropdown-menus">
                
                    <a href="/heavyfish.github.io/" class="dropdown-menu button">首页</a>
                
                    <a href="/heavyfish.github.io/tags/" class="dropdown-menu button">标签</a>
                
                    <a href="/heavyfish.github.io/categories/" class="dropdown-menu button">分类</a>
                
                    <a href="/heavyfish.github.io/archives/" class="dropdown-menu button">归档</a>
                
                    <a href="/heavyfish.github.io/friends/" class="dropdown-menu button">友链</a>
                
                    <a href="/heavyfish.github.io/page/" class="dropdown-menu button">Page</a>
                
            </div>
        
    </div>
</header>


            <main class="main">
    

<div class="post-title">
    <h1 class="post-title__text">
        no title
    </h1>
    <div class="post-title__meta">
        <a href="/heavyfish.github.io/archives/2020/11/" class="post-meta__date button">2020-11-02</a>
        
 
        
    
    


 

 
    </div>
</div>



<article class="post content-card">
    <div class="post__header"></div>
    <div class="post__content">
        <h1 id="8、从应用访问pod元数据以及其他资源"><a href="#8、从应用访问pod元数据以及其他资源" class="headerlink" title="8、从应用访问pod元数据以及其他资源"></a>8、从应用访问pod元数据以及其他资源</h1><h2 id="8-1、通过Downward-API传递元数据"><a href="#8-1、通过Downward-API传递元数据" class="headerlink" title="8.1、通过Downward API传递元数据"></a>8.1、通过Downward API传递元数据</h2><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102094945657.png" alt="image-20201102094945657" style="zoom:50%;" />

<h3 id="8-1-1、了解可用的元数据"><a href="#8-1-1、了解可用的元数据" class="headerlink" title="8.1.1、了解可用的元数据"></a>8.1.1、了解可用的元数据</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095020431.png" alt="image-20201102095020431" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095046923.png" alt="image-20201102095046923" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095114420.png" alt="image-20201102095114420" style="zoom:50%;" />

<h3 id="8-1-2、通过环境变量暴露元数据"><a href="#8-1-2、通过环境变量暴露元数据" class="headerlink" title="8.1.2、通过环境变量暴露元数据"></a>8.1.2、通过环境变量暴露元数据</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095213342.png" alt="image-20201102095213342" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095234670.png" alt="image-20201102095234670" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095308602.png" alt="image-20201102095308602" style="zoom:50%;" />

<h3 id="8-1-3、通过downwardAPI卷来传递元数据"><a href="#8-1-3、通过downwardAPI卷来传递元数据" class="headerlink" title="8.1.3、通过downwardAPI卷来传递元数据"></a>8.1.3、通过downwardAPI卷来传递元数据</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095430715.png" alt="image-20201102095430715" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095502746.png" alt="image-20201102095502746" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095529755.png" alt="image-20201102095529755" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095641916.png" alt="image-20201102095641916" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095836306.png" alt="image-20201102095836306" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095857600.png" alt="image-20201102095857600" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102095938694.png" alt="image-20201102095938694" style="zoom:50%;" />

<h2 id="8-2、与Kubernetes-API服务器交互"><a href="#8-2、与Kubernetes-API服务器交互" class="headerlink" title="8.2、与Kubernetes API服务器交互"></a>8.2、与Kubernetes API服务器交互</h2><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102100117040.png" alt="image-20201102100117040" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102100136191.png" alt="image-20201102100136191" style="zoom:50%;" />

<h3 id="8-2-1、探究Kubernetes-REST-API"><a href="#8-2-1、探究Kubernetes-REST-API" class="headerlink" title="8.2.1、探究Kubernetes REST API"></a>8.2.1、探究Kubernetes REST API</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 得到服务器的URL</span></span><br><span class="line">kubect1 cluster-info</span><br></pre></td></tr></table></figure>
<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102100401365.png" alt="image-20201102100401365" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102100504403.png" alt="image-20201102100504403" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102100637036.png" alt="image-20201102100637036" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102100743235.png" alt="image-20201102100743235" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102100803852.png" alt="image-20201102100803852" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102100822026.png" alt="image-20201102100822026" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101121323.png" alt="image-20201102101121323" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101158492.png" alt="image-20201102101158492" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101259904.png" alt="image-20201102101259904" style="zoom:50%;" />

<h3 id="8-2-2、从Pod内部与API服务器进行交互"><a href="#8-2-2、从Pod内部与API服务器进行交互" class="headerlink" title="8.2.2、从Pod内部与API服务器进行交互"></a>8.2.2、从Pod内部与API服务器进行交互</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101347850.png" alt="image-20201102101347850" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101435083.png" alt="image-20201102101435083" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101500333.png" alt="image-20201102101500333" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101558270.png" alt="image-20201102101558270" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101704754.png" alt="image-20201102101704754" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101826003.png" alt="image-20201102101826003" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101918819.png" alt="image-20201102101918819" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102101939730.png" alt="image-20201102101939730" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102035568.png" alt="image-20201102102035568" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102147660.png" alt="image-20201102102147660" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102207254.png" alt="image-20201102102207254" style="zoom:50%;" />

<h3 id="8-2-3、通过ambassador容器简化与API服务器的交互"><a href="#8-2-3、通过ambassador容器简化与API服务器的交互" class="headerlink" title="8.2.3、通过ambassador容器简化与API服务器的交互"></a>8.2.3、通过ambassador容器简化与API服务器的交互</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102352872.png" alt="image-20201102102352872" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102412533.png" alt="image-20201102102412533" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102442249.png" alt="image-20201102102442249" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102647838.png" alt="image-20201102102647838" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102725127.png" alt="image-20201102102725127" style="zoom:50%;" />

<h3 id="8-2-4、使用客户端与API服务器交互"><a href="#8-2-4、使用客户端与API服务器交互" class="headerlink" title="8.2.4、使用客户端与API服务器交互"></a>8.2.4、使用客户端与API服务器交互</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102810272.png" alt="image-20201102102810272" style="zoom:50%;" />

<h2 id="8-3、本章小结"><a href="#8-3、本章小结" class="headerlink" title="8.3、本章小结"></a>8.3、本章小结</h2><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102834119.png" alt="image-20201102102834119" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102102900493.png" alt="image-20201102102900493" style="zoom:50%;" />

<h1 id="9、Deployment：声明式地升级应用"><a href="#9、Deployment：声明式地升级应用" class="headerlink" title="9、Deployment：声明式地升级应用"></a>9、Deployment：声明式地升级应用</h1><h2 id="9-1、更新Pod内的应用程序"><a href="#9-1、更新Pod内的应用程序" class="headerlink" title="9.1、更新Pod内的应用程序"></a>9.1、更新Pod内的应用程序</h2><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102114848983.png" alt="image-20201102114848983" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102114957590.png" alt="image-20201102114957590" style="zoom:50%;" />

<h3 id="9-1-1、先删旧Pod再创新Pod"><a href="#9-1-1、先删旧Pod再创新Pod" class="headerlink" title="9.1.1、先删旧Pod再创新Pod"></a>9.1.1、先删旧Pod再创新Pod</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102115310955.png" alt="image-20201102115310955" style="zoom:50%;" />

<h3 id="9-1-2、先创新Pod再删旧Pod"><a href="#9-1-2、先创新Pod再删旧Pod" class="headerlink" title="9.1.2、先创新Pod再删旧Pod"></a>9.1.2、先创新Pod再删旧Pod</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102115151713.png" alt="image-20201102115151713" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102115449358.png" alt="image-20201102115449358" style="zoom:50%;" />

<h2 id="9-2、使用RC实现自动的滚动升级"><a href="#9-2、使用RC实现自动的滚动升级" class="headerlink" title="9.2、使用RC实现自动的滚动升级"></a>9.2、使用RC实现自动的滚动升级</h2><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102115554146.png" alt="image-20201102115554146" style="zoom:50%;" />

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl rolling-update kubia-vl kubia-v2 --image&#x3D;luksa&#x2F;kubia:v2</span><br></pre></td></tr></table></figure>
<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102115746599.png" alt="image-20201102115746599" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102115809983.png" alt="image-20201102115809983" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102115909828.png" alt="image-20201102115909828" style="zoom:50%;" />

<h3 id="9-2-3、kubectl-rolling-update-过时原因"><a href="#9-2-3、kubectl-rolling-update-过时原因" class="headerlink" title="9.2.3、kubectl rolling-update 过时原因"></a>9.2.3、kubectl rolling-update 过时原因</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102120036320.png" alt="image-20201102120036320" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102120141706.png" alt="image-20201102120141706" style="zoom:50%;" />

<h2 id="9-3、使用Deployment声明式地升级应用"><a href="#9-3、使用Deployment声明式地升级应用" class="headerlink" title="9.3、使用Deployment声明式地升级应用"></a>9.3、使用Deployment声明式地升级应用</h2><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102120322937.png" alt="image-20201102120322937" style="zoom:50%;" />

<h3 id="9-3-1、创建一个Deployment"><a href="#9-3-1、创建一个Deployment" class="headerlink" title="9.3.1、创建一个Deployment"></a>9.3.1、创建一个Deployment</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102120443249.png" alt="image-20201102120443249" style="zoom:50%;" />

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 创建一个Deployment</span></span><br><span class="line">kubect1 create -f kubia-deploymentvl.yaml --record</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：确保在创建时使用了 –record 选项。 这个选项会记录历史版本号， 在 之后的操作中非常有用</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看部署状态</span></span><br><span class="line">kubectl rollout status deployment kubia</span><br><span class="line">kubectl get deployment</span><br><span class="line">kubectl describe deployment</span><br></pre></td></tr></table></figure>
<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102120756595.png" alt="image-20201102120756595" style="zoom:50%;" />

<h3 id="9-3-2、升级Deployment"><a href="#9-3-2、升级Deployment" class="headerlink" title="9.3.2、升级Deployment"></a>9.3.2、升级Deployment</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102120916202.png" alt="image-20201102120916202" style="zoom:50%;" />

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 减慢滚动升级的速度</span></span><br><span class="line">kubectl patch deployment kubia -p &#x27;&#123;&quot;spec&quot;: &#123;&quot;minReadySeconds&quot;: 10&#125;&#125;&#x27;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>提示：kubectl patch对于修改单个或者少量资源属性非常有用， 不需要再通 过编辑器编辑</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 触发滚动升级</span></span><br><span class="line">kubectl set image deployment kubia nodejs=luksa/kubia:v2</span><br></pre></td></tr></table></figure>
<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121059977.png" alt="image-20201102121059977" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121138457.png" alt="image-20201102121138457" style="zoom:50%;" />

<h3 id="9-3-3、回滚Deployment"><a href="#9-3-3、回滚Deployment" class="headerlink" title="9.3.3、回滚Deployment"></a>9.3.3、回滚Deployment</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 回滚到上个版本</span></span><br><span class="line">kubectl rollout undo deployment kubia</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 回滚到一个特定版本</span></span><br><span class="line">kubectl rollout undo deployment kubia --to-revision=l</span><br></pre></td></tr></table></figure>
<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121339077.png" alt="image-20201102121339077" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121438449.png" alt="image-20201102121438449" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121554411.png" alt="image-20201102121554411" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121610669.png" alt="image-20201102121610669" style="zoom:50%;" />

<h3 id="9-3-4、控制滚动升级速率"><a href="#9-3-4、控制滚动升级速率" class="headerlink" title="9.3.4、控制滚动升级速率"></a>9.3.4、控制滚动升级速率</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121649738.png" alt="image-20201102121649738" style="zoom:50%;" />

<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121707945.png" alt="image-20201102121707945" style="zoom:50%;" />

<h3 id="9-3-5、暂停滚动升级"><a href="#9-3-5、暂停滚动升级" class="headerlink" title="9.3.5、暂停滚动升级"></a>9.3.5、暂停滚动升级</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 触发滚动升级</span></span><br><span class="line">kubectl set image deployment kubia nodejs=luksa/kubia:v2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 暂停升级</span></span><br><span class="line">kubectl rollout pause deployment kubia</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 恢复升级</span></span><br><span class="line">kubectl rollout resume deployment kubia</span><br></pre></td></tr></table></figure>
<img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102121952728.png" alt="image-20201102121952728" style="zoom:50%;" />

<h3 id="9-3-6、阻止出错版本的滚动升级"><a href="#9-3-6、阻止出错版本的滚动升级" class="headerlink" title="9.3.6、阻止出错版本的滚动升级"></a>9.3.6、阻止出错版本的滚动升级</h3><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102122106601.png" alt="image-20201102122106601" style="zoom:50%;" />

<h2 id="9-4、本章小结"><a href="#9-4、本章小结" class="headerlink" title="9.4、本章小结"></a>9.4、本章小结</h2><img src="/Users/shenshawn/Library/Application Support/typora-user-images/image-20201102122256270.png" alt="image-20201102122256270" style="zoom:50%;" />


    </div>
     
    <div class="post-footer__meta"><p>updated at 2020-11-02</p></div> 
    <div class="post-meta__cats"></div> 
</article>


    <div class="nav">
        <div class="nav__prev">
            
                <a href="/heavyfish.github.io/2020/11/02/k8s/Kubernetes%20in%20Action%20%E7%AC%94%E8%AE%B010~11/" class="nav__link">
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z" fill="#808080"></path></svg>
                    </div>
                    <div>
                        <div class="nav__label">
                            Previous Post
                        </div>
                        <div class="nav__title">
                            no title
                        </div>
                    </div>
                </a>
            
        </div>
        <div class="nav__next">
            
                <a href="/heavyfish.github.io/2020/10/31/k8s/Kubernetes%20in%20Action%20%E7%AC%94%E8%AE%B06%EF%BD%9E7/" class="nav__link">
                    <div>
                        <div class="nav__label">
                            Next Post
                        </div>
                        <div class="nav__title">
                            no title
                        </div>
                    </div>
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M434.944 790.624l-45.248-45.248L623.04 512l-233.376-233.376 45.248-45.248L713.568 512z" fill="#808080"></path></svg>
                    </div>
                </a>
            
        </div>
    </div>





</main>

            <footer class="footer">
    


    
     
 

 
    
        
        <p class="footer-copyright">
            Copyright © 2021 <a href="/heavyfish.github.io/">速查笔记</a>
        </p>
    
    
    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme - <a href="https://github.com/ChrAlpha/hexo-theme-cards" target="_blank">Cards</a></p>
</footer>

        </div>
         

 

 

 

  



 


    
 

 

 

 

 




    </body>
</html>
